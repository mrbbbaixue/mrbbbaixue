---
title: 浅谈Windows UAC提示模式
published: 2025-05-08
description: Windows 的账户系统比较复杂，UAC作为控制机制帮助阻止恶意程序对计算机进行更改
tags: [浅谈, Windows]
category: 浅谈
draft: false
---

## 提要

众多周知，Windows 的账户系统比较复杂（本地账户，管理员账户等，以及各种SYSTEM，TrustedInstaller），并且早年XP时代，许多学习版系统都默认使用Administrator作为日用账户，实际上默认允许了许多程序以管理员方式访问系统文件执行操作，造成安全隐患。

所以微软在Windows Vista及更高版本操作系统中引入的一种控制机制。其作用在于通知用户是否对应用程序和任务授权使用硬盘驱动器和系统文件，以达到帮助阻止恶意程序对计算机进行更改的目的。

但是，UAC默认的强提醒机制明显对于普通用户会造成过多界面干扰（降低屏幕亮度，并且进入安全桌面），而且，默认只点击就可提升的方法相较于Linux并不「安全」。所以大家都会更改UAC选项来定制提示时机。

## 简单修改

普通的关闭或者调整UAC的方法很简单：打开开始菜单搜索「用户账户控制」，就可以到下图页面：
![](/images/talk-windows-uac-options-01.png)
对于一般用户，推荐修改到如图所示的**第二级**，也就是「仅当应用尝试更改计算机时通知我（不降低桌面亮度）」，这样出现UAC提示时，不会在安全桌面中弹出窗口，减少干扰。
**(!) 不建议完全关掉UAC，否则如果后台有程序在获取管理员，或者一不小心下到某些垃圾软件的时候就搞了**

不过，UAC还有许多选项可以定制使用（？）接下来我就介绍组策略中关于用户账户控制弹窗的几种高级选项，包括启用生物识别提示和对所有程序进行提示。


## 隐藏选项

高级选项无法通过用户账户控制设置窗口直接修改，需要进入组策略。打开组策略的教程不再赘述，网上非常多。

打开的方法就是按住`Win+R`，然后输入`gpedit.msc`，没什么好说的。

在组策略中，需要导航到「计算机配置 > Windows 设置 > 安全设置 > 本地策略 > 安全选项」。
![](/images/talk-windows-uac-options-02.png)

然后可以在右边栏中找到**10项**用户账户控制的有关设置，我选择其中比较有意思或者有用的几个。


### 使用Admin Approval Mode管理员批准模式

> 用户账户控制: 用于内置管理员账户的管理员批准模式

这个选项会强制*原本全权限*的管理员账户（也就是Administrator）遵守用户账户控制策略的方式打开，但是不会影响管理员账户对于其他账户的控制。比如不会要求二次确认。

*实际上因为我只用一个本地账户...后面忘了看有没有影响了，请各位自己尝试吧~*


### 用生物识别设备进行管理员提权确认

> 用户账户控制: 提示提升权限时的行为

![](/images/talk-windows-uac-options-03.png)

可以看到，可以设置在安全桌面对于管理员的提示，以下为几种可选配置：

**不提示，直接提升**（不安全）
**在安全桌面上提示凭据**（推荐：**使用Windows Hello**确认）
**在安全桌面上同意提示**（默认）
**提示凭据**（不推荐：危险）
**同意提示**（实际上就是滑块的第二级）
**提示同意非 Windows 二进制文件**（会弹窗，不推荐）

*如果你开启了HelloFace，推荐使用第二项，每次你对一个程序提权，都要刷一次脸，蛮安全蛮方便（*


### 指定提示时是否启用SecureDesktop，并且UI呈现

> 用户账户控制: 提示提升权限时切换到安全桌面

这个配置决定了UAC提示时是否要在安全桌面进行展示（就是平常看到的UAC变暗，屏幕变暗）

如果关闭该选项，提示弹窗时就*不需要*「切换安全桌面」并且在那里（屏幕变暗）显示UAC请求了，而是会尝试在（不安全）交互式用户的桌面上显示提示请求。

> 用户账户控制: 将 UIAccess 应用程序的提升权限提示显示在交互式用户的安全桌面上
这个选项可以指定某些特殊UIA程序是否需要切换安全桌面显示UAC弹窗。


### 仅允许在安装位置提升

> 用户账户控制: 仅提升安装在安全位置的可执行文件

如果启用此策略设置，则会在允许应用程序运行之前，先强制*系统*检查可执行文件的安装位置是否为安全位置，例如 Program Files 目录或 Windows 目录。

如果可执行文件位于文件系统的安全位置，它就会以提升的权限运行。而从其他「不安全」的地方（例如下载，桌面，某些自定义目录），就会被拒绝权限提升。

可以用于防止恶意软件诱导用户将恶意程序放置到「合法」的目录下然后启动提权操作，这样用户就需要手动去Program Files或者System目录下才可以使用管理员方式提权并打开。


### 对所有管理员运行提升请求

> 用户账户控制: 以管理员批准模式运行所有管理员

这个选项设定所有用户账户控制（UAC）策略设置对于计算机的行为。如果更改此设置，则必须重启计算机。（所以会提示）

![](/images/talk-windows-uac-options-04.png)

可以看到如果启用此设置就会，和之前的设置稍有出入，它会确保所有UAC设置被激活，在这种情况下，任何提升权限的请求都会要求输入用户名和密码或者进行Windows Hello生物识别确认。


## 结语

UAC是Windows比较重要和有用的功能之一，并且它本身还有各种策略可以设置不同的层级，你可以根据自己的使用需求来调整参数。

如果你是追求安全和正统的用户，推荐设置生物识别认证以及对所有管理员运行提升请求，并开启SecureDesktop。

如果你是追求方便和效率，并且比较相信自己的警惕性，那么可以关闭安全桌面切换，使用非管理员提权（允许点击确认就过）。

总之，按需调整就好，不过记得不要完全关闭UAC啦。
